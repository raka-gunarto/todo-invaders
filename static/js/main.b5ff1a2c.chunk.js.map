{"version":3,"sources":["assets/invader.svg","assets/invader2.svg","todo-invaders.js","assets/turret.svg","App.js","index.js","App.module.css","todo-invaders.module.css"],"names":["TodoInvaders","numdays","useState","todos","setTodos","rows","setRows","updateInterval","setUpdateInterval","destroyTodo","e","todo","target","onanimationend","splice","indexOf","localStorage","setItem","JSON","stringify","classList","add","styles","explode","showNewTodoGhost","setShowNewTodoGhost","newTodoGhostOffset","setNewTodoGhostOffset","useEffect","clearInterval","getRows","setInterval","parse","getItem","Fragment","style","position","top","left","width","height","onMouseMove","pageX","window","innerWidth","newTodoHover","onMouseLeave","onClick","title","prompt","desc","due","Date","alert","push","description","duedate","offset","transform","opacity","hidden","className","invader","ghost","src","invader1svg","todocontainer","i","invaders","today","now","daysLeft","diffDays","Math","ceil","drop","getSeconds","invader2svg","toDateString","daysrow","Home","turret","setTurret","console","log","container","turretRect","getBoundingClientRect","turretX","turretY","atan2","clientY","clientX","PI","shoot","main","footer","turretsvg","alt","onAnimationEnd","remove","ref","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.b5ff1a2c.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/invader.52b2ab26.svg\";","export default __webpack_public_path__ + \"static/media/invader2.20e4105d.svg\";","import React, { useState, useEffect } from \"react\";\nimport styles from \"./todo-invaders.module.css\";\n\nimport invader1svg from \"./assets/invader.svg\";\nimport invader2svg from \"./assets/invader2.svg\";\n\nexport default function TodoInvaders({ numdays }) {\n  const [todos, setTodos] = useState([]);\n\n  const [rows, setRows] = useState([]);\n  const [updateInterval, setUpdateInterval] = useState(null);\n\n  const destroyTodo = (e, todo) => {\n    e.target.onanimationend = () => {\n      todos.splice(todos.indexOf(todo), 1);\n      setTodos(todos);\n      localStorage.setItem(\"todos\", JSON.stringify(todos));\n    };\n\n    e.target.classList.add(styles.explode);\n  };\n\n  const [showNewTodoGhost, setShowNewTodoGhost] = useState(false);\n  const [newTodoGhostOffset, setNewTodoGhostOffset] = useState(0);\n  const newTodoHover = (e) => {\n    setShowNewTodoGhost(true);\n    setNewTodoGhostOffset(((e.pageX - 80) / window.innerWidth) * 100);\n  };\n  const newTodoHoverOff = () => setShowNewTodoGhost(false);\n\n  const createTodo = () => {\n    let title = window.prompt(\"TODO Title\");\n    let desc = window.prompt(\"TODO Description\");\n    let due = Date.parse(window.prompt(\"TODO Due Date\", \"yyyy-mm-dd\")) || null;\n    if (!due) return window.alert(\"Invalid Date!\");\n    todos.push({\n      title: title,\n      description: desc,\n      duedate: due,\n      offset: newTodoGhostOffset,\n    });\n    setTodos(todos);\n    localStorage.setItem(\"todos\", JSON.stringify(todos));\n  };\n\n  useEffect(() => {\n    if (updateInterval) clearInterval(updateInterval);\n\n    setRows(getRows(todos, numdays, destroyTodo));\n    setUpdateInterval(\n      setInterval(() => {\n        setRows(getRows(todos, numdays, destroyTodo));\n      }, 1000)\n    );\n  }, [todos]);\n\n  useEffect(() => setTodos(JSON.parse(localStorage.getItem(\"todos\")) || [] ));\n\n  return (\n    <React.Fragment>\n      <div\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          width: \"100%\",\n          height: \"8rem\",\n        }}\n        onMouseMove={(e) => newTodoHover(e)}\n        onMouseLeave={newTodoHoverOff}\n        onClick={createTodo}\n      >\n        <figure\n          style={{\n            transform: `translateX(${newTodoGhostOffset}vw)`,\n            opacity: 0.5,\n          }}\n          hidden={!showNewTodoGhost}\n          className={`${styles.invader} ${styles.ghost}`}\n        >\n          <img src={invader1svg} />\n        </figure>\n      </div>\n\n      <div className={styles.todocontainer}>{rows}</div>\n    </React.Fragment>\n  );\n}\n\nfunction getRows(todos, numdays, destroyTodo) {\n  let rows = [];\n  for (let i = 0; i < numdays; ++i) {\n    let invaders = [];\n    let today = Date.now();\n    let daysLeft = numdays - i;\n    for (let todo of todos) {\n      let diffDays = Math.ceil((todo.duedate - today) / (1000 * 60 * 60 * 24));\n      if (\n        diffDays == daysLeft ||\n        (daysLeft == numdays && diffDays >= daysLeft)\n      ) {\n        let drop =\n          diffDays == daysLeft\n            ? -3 * (((todo.duedate - today) / (1000 * 60 * 60 * 24)) % 1)\n            : -6;\n        invaders.push(\n          <figure\n            style={{\n              transform: `translateY(${drop}rem) translateX(${todo.offset}vw)`,\n            }}\n            className={styles.invader}\n            onClick={(e) => destroyTodo(e, todo)}\n          >\n            <img\n              src={new Date().getSeconds() % 2 == 0 ? invader1svg : invader2svg}\n            ></img>\n            <span className={styles.description}>\n              {todo.description}\n              <br />\n              {`Due: ${new Date(todo.duedate).toDateString()}`}\n            </span>\n            <figcaption>{todo.title}</figcaption>\n          </figure>\n        );\n      }\n    }\n\n    rows.push(\n      <div className={styles.daysrow}>\n        {numdays - i}\n        {numdays - i == numdays ? \"+\" : \"\"} day{numdays - i > 1 ? \"s\" : \"\"} left\n        {invaders}\n      </div>\n    );\n  }\n\n  return rows;\n}\n","export default __webpack_public_path__ + \"static/media/turret.739cfa2c.svg\";","import styles from \"./App.module.css\";\n\nimport TodoInvaders from \"./todo-invaders\";\nimport { useState } from \"react\";\n\nimport turretsvg from \"./assets/turret.svg\";\n\nexport default function Home() {\n  const [turret, setTurret] = useState(null);\n  console.log(styles);\n\n  function rotateToMouse(e) {\n    if (turret == null) return;\n\n    var turretRect = turret.getBoundingClientRect();\n    var turretX = turretRect.left + turretRect.width / 2;\n    var turretY = turretRect.top + turretRect.height / 2;\n    turret.style.transform = `rotate(${\n      Math.atan2(e.clientY - turretY, e.clientX - turretX) + Math.PI / 2\n    }rad)`;\n  }\n\n  const pew = () => {\n    if (turret == null) return;\n    turret.classList.add(styles.shoot);\n  };\n\n  const pewstop = () => {\n    if (turret == null) return;\n    turret.classList.remove(styles.shoot);\n  };\n\n  return (\n    <div className={styles.container} onMouseMove={rotateToMouse} onClick={pew}>\n      <main className={styles.main}>\n        <TodoInvaders numdays={14} />\n      </main>\n\n      <footer className={styles.footer}>\n        <img\n          src={turretsvg}\n          alt=\"Turret\"\n          className={styles.turret}\n          onAnimationEnd={pewstop}\n          ref={(ref) => {\n            setTurret(ref);\n          }}\n        />\n      </footer>\n    </div>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"App_container__1MQN3\",\"main\":\"App_main__3ZkGI\",\"footer\":\"App_footer__29Fsv\",\"title\":\"App_title__-GfWs\",\"description\":\"App_description__1hmAY\",\"code\":\"App_code__2uyOK\",\"grid\":\"App_grid__3DnSg\",\"card\":\"App_card__3tefE\",\"turret\":\"App_turret__28OKa\",\"shoot\":\"App_shoot__3uOIK\",\"pew\":\"App_pew__2ssJ3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"todocontainer\":\"todo-invaders_todocontainer__1XSqn\",\"daysrow\":\"todo-invaders_daysrow__1SB4l\",\"invader\":\"todo-invaders_invader__2xbdL\",\"ghost\":\"todo-invaders_ghost__238J0\",\"description\":\"todo-invaders_description__cn2V0\",\"explode\":\"todo-invaders_explode__2b-SQ\",\"boom\":\"todo-invaders_boom__1C88F\"};"],"sourceRoot":""}